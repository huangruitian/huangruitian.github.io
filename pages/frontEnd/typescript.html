<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>为什么要使用TS？ | 前端加加首页</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="前端加加的前端记录">
    
    <link rel="preload" href="/my_blog/assets/css/0.styles.7e889f05.css" as="style"><link rel="preload" href="/my_blog/assets/js/app.9ec3da70.js" as="script"><link rel="preload" href="/my_blog/assets/js/2.e3f31b61.js" as="script"><link rel="preload" href="/my_blog/assets/js/31.fe8e5810.js" as="script"><link rel="prefetch" href="/my_blog/assets/js/10.660f34a0.js"><link rel="prefetch" href="/my_blog/assets/js/11.04264977.js"><link rel="prefetch" href="/my_blog/assets/js/12.bbd869a5.js"><link rel="prefetch" href="/my_blog/assets/js/13.60d03d23.js"><link rel="prefetch" href="/my_blog/assets/js/14.1e26253a.js"><link rel="prefetch" href="/my_blog/assets/js/15.f0b49b1e.js"><link rel="prefetch" href="/my_blog/assets/js/16.9bbd85dc.js"><link rel="prefetch" href="/my_blog/assets/js/17.93ff155b.js"><link rel="prefetch" href="/my_blog/assets/js/18.01bf3a1b.js"><link rel="prefetch" href="/my_blog/assets/js/19.272ebe19.js"><link rel="prefetch" href="/my_blog/assets/js/20.4de1e0e4.js"><link rel="prefetch" href="/my_blog/assets/js/21.f3f2e17b.js"><link rel="prefetch" href="/my_blog/assets/js/22.715ab356.js"><link rel="prefetch" href="/my_blog/assets/js/23.1b7c1842.js"><link rel="prefetch" href="/my_blog/assets/js/24.8e3a17f0.js"><link rel="prefetch" href="/my_blog/assets/js/25.2421c50e.js"><link rel="prefetch" href="/my_blog/assets/js/26.bf80aaed.js"><link rel="prefetch" href="/my_blog/assets/js/27.5d13242f.js"><link rel="prefetch" href="/my_blog/assets/js/28.097ef5c8.js"><link rel="prefetch" href="/my_blog/assets/js/29.f22210b2.js"><link rel="prefetch" href="/my_blog/assets/js/3.48e58c74.js"><link rel="prefetch" href="/my_blog/assets/js/30.8d832d1a.js"><link rel="prefetch" href="/my_blog/assets/js/32.91a6282a.js"><link rel="prefetch" href="/my_blog/assets/js/33.353a7174.js"><link rel="prefetch" href="/my_blog/assets/js/4.05257145.js"><link rel="prefetch" href="/my_blog/assets/js/5.a35e0fbe.js"><link rel="prefetch" href="/my_blog/assets/js/6.841ea7d8.js"><link rel="prefetch" href="/my_blog/assets/js/7.db3a0018.js"><link rel="prefetch" href="/my_blog/assets/js/8.7b3de8a6.js"><link rel="prefetch" href="/my_blog/assets/js/9.378a26f9.js">
    <link rel="stylesheet" href="/my_blog/assets/css/0.styles.7e889f05.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my_blog/" class="home-link router-link-active"><!----> <span class="site-name">前端加加首页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my_blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/huangruitian" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/my_blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/huangruitian" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>es6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>redux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>http</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>https</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>websocket</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>TypeScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my_blog/pages/frontEnd/typescript.html" aria-current="page" class="active sidebar-link">为什么要使用TS？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#为什么要使用ts" class="sidebar-link">为什么要使用TS？</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#js存在的问题" class="sidebar-link">JS存在的问题：</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#js的原罪" class="sidebar-link">js的原罪</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#typescript-简称ts" class="sidebar-link">TypeScript (简称TS)</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#typescript-的常识" class="sidebar-link">TypeScript 的常识</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#typescript-的环境搭建" class="sidebar-link">TypeScript 的环境搭建</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#默认情况下-ts会做出下面几种假设" class="sidebar-link">默认情况下，TS会做出下面几种假设：</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#有两种方式更改以上假设" class="sidebar-link">有两种方式更改以上假设：</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#使用第三方库简化操作流程-编译执行。" class="sidebar-link">使用第三方库简化操作流程，编译执行。</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#基本的类型约束-可选的" class="sidebar-link">基本的类型约束（可选的）</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#源代码和编译结果的差异" class="sidebar-link">源代码和编译结果的差异</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#基本类型" class="sidebar-link">基本类型</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#其它常用类型" class="sidebar-link">其它常用类型</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#类型别名-对已知的类型定义别名" class="sidebar-link">类型别名：对已知的类型定义别名</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#甚至还可以类型组合" class="sidebar-link">甚至还可以类型组合</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#函数的相关约束" class="sidebar-link">函数的相关约束</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#扩展类型-枚举" class="sidebar-link">扩展类型-枚举</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#枚举-自定义类型-扩展类型" class="sidebar-link">枚举：自定义类型，扩展类型</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#枚举细节规则" class="sidebar-link">枚举细节规则</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#扩展-位枚举-枚举的位运算符" class="sidebar-link">扩展：位枚举（枚举的位运算符）</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#接口和类型兼容性" class="sidebar-link">接口和类型兼容性：</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#在代码层次的接口约束-就是强约束-java-c-。" class="sidebar-link">在代码层次的接口约束，就是强约束（java, C#）。</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#接口是可以继承的-可以通过继承接口来组合约束。类型别名不行了。" class="sidebar-link">接口是可以继承的, 可以通过继承接口来组合约束。类型别名不行了。</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#接口和类型别名的差异" class="sidebar-link">接口和类型别名的差异：</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#readonly修饰符-修饰的目标是只读的" class="sidebar-link">readonly修饰符，修饰的目标是只读的</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#类型兼容性" class="sidebar-link">类型兼容性</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#对类型的判断" class="sidebar-link">对类型的判断</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#函数类型-一切无比的自然-但是返回值如果在约束的时候就要求返回就一定要返回" class="sidebar-link">函数类型：一切无比的自然，但是返回值如果在约束的时候就要求返回就一定要返回</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#类-面向对象思想、是一种思维模式" class="sidebar-link">类（面向对象思想、是一种思维模式）</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#感受一下下面的实例" class="sidebar-link">感受一下下面的实例：</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#访问器-用于控制属性的读取和赋值" class="sidebar-link">访问器，用于控制属性的读取和赋值</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#泛型-重点类型后面会频繁使用" class="sidebar-link">泛型，重点类型后面会频繁使用</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#在函数中使用泛型" class="sidebar-link">在函数中使用泛型：</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#泛型在类、接口、类型别名上的应用" class="sidebar-link">泛型在类、接口、类型别名上的应用</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#多泛型" class="sidebar-link">多泛型</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#模块化" class="sidebar-link">模块化</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#小总结" class="sidebar-link">小总结：</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#深入理解类和接口" class="sidebar-link">深入理解类和接口</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#里氏替换原则" class="sidebar-link">里氏替换原则</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#继承的作用" class="sidebar-link">继承的作用</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#成员的重写-override" class="sidebar-link">成员的重写（override）</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#protected-private-public" class="sidebar-link">protected private public</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#继承的单根性和传递性" class="sidebar-link">继承的单根性和传递性</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#抽象类" class="sidebar-link">抽象类</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#静态成员-static" class="sidebar-link">静态成员 static</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#再谈接口" class="sidebar-link">再谈接口</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#类型保护函数-相当于-a-instanceof-idown-java中可以这么用ts不行。" class="sidebar-link">类型保护函数：相当于 a instanceof IDown, java中可以这么用TS不行。</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#索引器" class="sidebar-link">索引器</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#类this指向问题" class="sidebar-link">类this指向问题</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#类型演算" class="sidebar-link">类型演算</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#三个关键字" class="sidebar-link">三个关键字</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#类型演算其实就是根据已知类型可关键字演算出新的类型-很实用" class="sidebar-link">类型演算其实就是根据已知类型可关键字演算出新的类型，很实用</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#声明文件" class="sidebar-link">声明文件</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#_2020-04-06-二次学习ts的一些坑" class="sidebar-link">2020-04-06 二次学习TS的一些坑</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#允许使用额外的属性" class="sidebar-link">允许使用额外的属性</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#自定义类型保护函数" class="sidebar-link">自定义类型保护函数</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#枚举类型" class="sidebar-link">枚举类型</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#readonly-只能保证-我-不能改变属性-其它没有保证的可以改" class="sidebar-link">readonly 只能保证“我”不能改变属性，其它没有保证的可以改</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#ts-类型兼容-重要" class="sidebar-link">TS 类型兼容，重要；</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#ts-索引签名-加强" class="sidebar-link">TS 索引签名，加强</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#typeof-ts中-作用于类型的时候-得到的是类型-作用于类的时候-得到的时候构造函数" class="sidebar-link">typeof TS中，作用于类型的时候，得到的是类型，作用于类的时候，得到的时候构造函数</a></li><li class="sidebar-sub-header"><a href="/my_blog/pages/frontEnd/typescript.html#infer" class="sidebar-link">infer</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="为什么要使用ts"><a href="#为什么要使用ts" class="header-anchor">#</a> 为什么要使用TS？</h2> <ul><li>获得更好的开发体验，解决JS中一些难以解决的问题</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">const</span> <span class="token function-variable function">findUserName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name <span class="token operator">===</span> item<span class="token punctuation">.</span>name
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">findUserNmae</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token string">'hrt'</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="js存在的问题"><a href="#js存在的问题" class="header-anchor">#</a> JS存在的问题：</h2> <ol><li>使用了不存在的变量函数或者成员（函数名字写错等等）</li> <li>函数返回类型不准确，无法预知的类型。（把不确定的类型，当成确定的类型）</li> <li>在使用null或者undefined成员</li> <li>代码的 可阅读性 和 可维护性很差；</li></ol> <h2 id="js的原罪"><a href="#js的原罪" class="header-anchor">#</a> js的原罪</h2> <ol><li>js语言本身的特性，决定了该语言无法适应大型复杂项目</li> <li>弱类型，某个变量随时更换类型</li> <li>解释性语言，解释一行，运行一行。错误发生的时间点是运行时。</li> <li>前端开发中，大部分时间都在排错。（很多时候，都在花费时间排错！！！）</li></ol> <h2 id="typescript-简称ts"><a href="#typescript-简称ts" class="header-anchor">#</a> TypeScript (简称TS)</h2> <ol><li>TS是JS的超集，是一个可选的，静态的类型系统。</li> <li>类型系统，对所有的标识符（变量、参数、函数、返回值）进行类型检查</li> <li>类型检查是在编译时候，运行之前（运行的是JS代码）</li> <li>需要tsc index.ts 转换才能执行，TS不参与任何运行时候的检查。</li></ol> <h2 id="typescript-的常识"><a href="#typescript-的常识" class="header-anchor">#</a> TypeScript 的常识</h2> <ol><li>2012年微软发布</li> <li>anders负责开发TS项目，后来开源了</li> <li>定位类型检查系统，缩短项目排错时间</li> <li>有了类型检查之后，无形中增强了面向对象的开发</li> <li>JS可以面向对象开发，但是会遇到很多问题的。（暂不举具例）</li> <li>使用TS后，可以编写出完善的面向对象代码</li></ol> <h2 id="typescript-的环境搭建"><a href="#typescript-的环境搭建" class="header-anchor">#</a> TypeScript 的环境搭建</h2> <ul><li>在node中搭建TS开发环境，因为要关注语法本身</li></ul> <h2 id="默认情况下-ts会做出下面几种假设"><a href="#默认情况下-ts会做出下面几种假设" class="header-anchor">#</a> 默认情况下，TS会做出下面几种假设：</h2> <ol><li>假设当前的执行环境是浏览器的环境</li> <li>如果代码中没有使用模块化语句（import、export）, 便认为该代码是全局执行。
一个文件中 let n:number = 1 ，tsc 编译之后形成的js文件中的变量是全局的，所有TS文件的全局变量报错。全局冲突嘛。</li> <li>编译的目标代码，是ES3，可配置。</li></ol> <h2 id="有两种方式更改以上假设"><a href="#有两种方式更改以上假设" class="header-anchor">#</a> 有两种方式更改以上假设：</h2> <ol><li>使用tsc命令行编译的时候，加上选项参数</li> <li>使用TS配置文件，来更改编译选项（重点学, tsc --init命令会直接生成tsconfig.json文件）</li> <li>使用了配置文件之后，tsc编译不能再跟上文件名了，如果跟上会忽略配置文件</li> <li>@types/node, @types是官方的第三方库，其中包含了很多对js代码类型的描述。（比如JQ，可以安装@types/jquery, 为jquery库添加类型描述）</li></ol> <h2 id="使用第三方库简化操作流程-编译执行。"><a href="#使用第三方库简化操作流程-编译执行。" class="header-anchor">#</a> 使用第三方库简化操作流程，编译执行。</h2> <ul><li>ts-node: 将ts代码在内存中完成编译，同时完成运行。</li> <li>使用的时候要指定一个入口，命令 ts-node src/index.ts, 开发阶段很好用。</li> <li>但是不能监控代码变化，要使用nodemon:用于检测文件的变化。</li> <li>nodemon --exec ts-node src/index.ts  //检测文件变化，变化时候执行ts-node命令</li> <li>nodemon --exec ts-node src/index.ts 把这个命令写成一个脚本，方便执行。</li> <li>把命令写到package.json，中。&quot;scripts&quot;:{ &quot;dev&quot; : &quot;nodemon --exec ts-node src/index.ts&quot; }</li> <li>启动的时候直接npm run dev就可以了</li> <li>nodemon 监控的文件太多了，所以要配置一下它：</li> <li>nodemon -e ts --exec ts-node src/index.ts  // -e ts 文件扩展名ts</li> <li>进一步配置，监控的文件夹：nodemon --watch src -e ts --exec ts-node src/index.ts</li> <li>开发完成直接tsc ，打包输出dist</li></ul> <h2 id="基本的类型约束-可选的"><a href="#基本的类型约束-可选的" class="header-anchor">#</a> 基本的类型约束（可选的）</h2> <ul><li>如何进行类型约束？</li> <li>变量，函数的参数、函数的返回值</li> <li>f2或者重命名符号，可以全局改一个索引。f12或者转到定义。就可以快速跳到定义。</li> <li>很多场景下ts可以类型推导；没有一定说用了ts就啥都要写类型；</li></ul> <h2 id="源代码和编译结果的差异"><a href="#源代码和编译结果的差异" class="header-anchor">#</a> 源代码和编译结果的差异</h2> <ul><li>运行过程中就是JS代码，切记，TS类型是静态类型，暂时做不到运行时的类型检查</li></ul> <h2 id="基本类型"><a href="#基本类型" class="header-anchor">#</a> 基本类型</h2> <ol><li>number</li> <li>string</li> <li>boolean</li> <li>数组：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> numArr<span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 或者<span class="token keyword">let</span> numArr<span class="token operator">:</span>Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>，这种也叫泛型
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li>object:  let u:Object; 约束力很弱，赋值函数也不会报错，用得不多。</li> <li>null/undefined</li></ol> <ul><li>null 和 undefined 是所有其它类型的子类型，它们可以赋值给其它类型</li> <li>&quot;strictNullChecks&quot;: true, 可以更加严格的空类型检查，不让null 和 undefined 随便赋值，只能赋值给自身</li> <li>随着版本更新，2020-2-20发布的3.8版本有更多新特性</li></ul> <h2 id="其它常用类型"><a href="#其它常用类型" class="header-anchor">#</a> 其它常用类型</h2> <ul><li><p>联合类型（多种类型，任选其一），比如字面量联合类型，类型联合类型，后面还会学到 &amp; 与操作</p></li> <li><p>let name:string | undefined = undefined, 如果没有具体赋值，还是可以类型推导。</p></li> <li><p>类型保护，如果某个变量进行判断之后，就可以确定是什么类型了。（后面讲怎么触发类型保护，只能触发原始类型）</p></li> <li><p>void类型: 通常用于约束函数的返回值</p></li> <li><p>never类型：通常用于约束函数的返回值，表示该函数永远不可能结束，不会返回值</p></li> <li><p>举例：或者函数内死循环。</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">throwError</span><span class="token punctuation">(</span><span class="token parameter">msg <span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token operator">:</span>never<span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//到这里就停了</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'aaaa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里以至于下面都不可能执行了</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>字面量类型：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>   <span class="token keyword">let</span> gender<span class="token operator">:</span><span class="token string">'男'</span> <span class="token operator">|</span> <span class="token string">'女'</span><span class="token punctuation">;</span>       <span class="token comment">//从此只能赋值男女</span>
   <span class="token keyword">let</span> arr<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                    <span class="token comment">//永远只能取值为一个空数组</span>
   <span class="token keyword">let</span> user<span class="token operator">:</span> <span class="token punctuation">{</span>
     name<span class="token operator">:</span>string
     age<span class="token operator">:</span>number
   <span class="token punctuation">}</span>
   user <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">'hrt'</span><span class="token punctuation">,</span> age<span class="token operator">:</span><span class="token number">33</span> <span class="token punctuation">}</span> <span class="token comment">//强力约束了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><p>元祖类型(Tuple)：一个固定长度的数组，并且数组中每一项的类型确定</p></li> <li><p><code>let tu:[string, number]</code>; 之后赋值必须赋值两项，类型确定</p></li> <li><p>any类型：any类型，可以绕过类型检查，因此，any类型的数据，可以赋值给任意类型</p></li> <li><p>举例：</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> data<span class="token operator">:</span>any<span class="token punctuation">;</span> 
<span class="token keyword">let</span> num<span class="token operator">:</span>number <span class="token operator">=</span> data
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>会有隐患，不要随意用，我们可以使用unknown保持有类型检查；</p></li> <li><p>基本类型和其它常用类型统称为TS类型</p></li></ul> <h2 id="类型别名-对已知的类型定义别名"><a href="#类型别名-对已知的类型定义别名" class="header-anchor">#</a> 类型别名：对已知的类型定义别名</h2> <ul><li>这个react会经常用到</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>type User <span class="token operator">=</span> <span class="token punctuation">{</span>
   name<span class="token operator">:</span>string
   age<span class="token operator">:</span>number
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>let user: User, 不仅变量可以这样方便的使用，函数返回值也可以方便点，简洁代码</li> <li>后面还可以通过一些操作符，像&amp;之类的，高级联合类型</li></ul> <h2 id="甚至还可以类型组合"><a href="#甚至还可以类型组合" class="header-anchor">#</a> 甚至还可以类型组合</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>type Gender <span class="token operator">=</span> <span class="token string">'男'</span> <span class="token operator">|</span> <span class="token string">'女'</span>
type User <span class="token operator">=</span> user<span class="token operator">:</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span>string
  age<span class="token operator">:</span>number
  gender<span class="token operator">:</span>Gender <span class="token comment">//这样可以很方便的维护代码，代码重用</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="函数的相关约束"><a href="#函数的相关约束" class="header-anchor">#</a> 函数的相关约束</h2> <ul><li>函数重载：在函数实现之前，对调用的多种情况进行声明</li> <li>举例：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>   <span class="token keyword">function</span> <span class="token function">combine</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span>number<span class="token punctuation">,</span> b<span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token operator">:</span>number<span class="token punctuation">;</span>
   <span class="token keyword">function</span> <span class="token function">combine</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span>string<span class="token punctuation">,</span> b<span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token operator">:</span>string<span class="token punctuation">;</span>
   <span class="token keyword">function</span> <span class="token function">combine</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span>number <span class="token operator">|</span> string<span class="token punctuation">,</span> b<span class="token operator">:</span>number <span class="token operator">|</span> string</span><span class="token punctuation">)</span><span class="token operator">:</span>number <span class="token operator">|</span> string<span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> b <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> a <span class="token operator">*</span> b
      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> b <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> a <span class="token operator">+</span> b
      <span class="token punctuation">}</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'a和b 类型必须相同'</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">combine</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span> <span class="token comment">//使用的时候，就可以具体的推导出类型</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>可选参数：在某些参数后面加上问号，代表可选参数，不仅在函数（要放末尾）中可以使用，其它地方也可以</li> <li>函数默认值：像ES6 一样可以直接在参数上面写默认参数</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">function</span> <span class="token function">combine</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span>number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">?</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token operator">:</span>number <span class="token punctuation">{</span>
       <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="扩展类型-枚举"><a href="#扩展类型-枚举" class="header-anchor">#</a> 扩展类型-枚举</h2> <ul><li>枚举类型可以很好的避免硬编码</li></ul> <ol><li>类型别名：type 另取名字</li> <li>枚举：</li></ol> <ul><li>枚举通常用于约束某个变量的取值范围，用字面量和联合类型配合使用，也可以达到同样的目标</li> <li>字面量类型的问题：会出现重复的代码，比如 let gender: '男' | '女'；</li> <li>在某个函数中要使用通过性别查找，函数的形参，就要写字面量；这样就不够灵活，出现硬编码</li> <li>解决：使用type类型别名，就可以解决了，但是，如果一旦别名类型一改，全部的代码都要改</li> <li>举例：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>type Gender <span class="token operator">=</span> <span class="token string">'男'</span> <span class="token operator">|</span> <span class="token string">'女'</span>
<span class="token keyword">let</span> gender<span class="token operator">:</span>Gender<span class="token punctuation">;</span>
    gender <span class="token operator">=</span> <span class="token string">'男'</span> <span class="token comment">//这里只能选字面量的值</span>
<span class="token comment">//我们假设后面还有 N 多个变量使用类型别名Gender</span>
<span class="token comment">//......如果Gender改了，gender后面甚至更多的都要改</span>
<span class="token comment">//根源是真实的值和逻辑含义产生了混淆，没有分开。真实值一改，全要改了。</span>
<span class="token comment">//字面量类型不会进入到编译结果</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="枚举-自定义类型-扩展类型"><a href="#枚举-自定义类型-扩展类型" class="header-anchor">#</a> 枚举：自定义类型，扩展类型</h2> <ul><li>枚举类型可以很好的解决上面硬编码的问题</li> <li>定义：enum 枚举名｛ 枚举字段 ｝</li> <li>举例使用：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">-</span>  <span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
     male <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">,</span>
     female <span class="token operator">=</span> <span class="token string">'女'</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">let</span> gender<span class="token operator">:</span>Gender<span class="token punctuation">;</span>
   gender <span class="token operator">=</span> Gender<span class="token punctuation">.</span>male
   gender <span class="token operator">=</span> Gender<span class="token punctuation">.</span>female
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>因此，使用的时候是使用逻辑名称，赋值的时候还是字面量</li> <li>如果逻辑名称改了，f2重构就可以了，一改全改，编码硬编码</li> <li>枚举参与编译，会出现在编译结果中，编译成一个对象。以前的类型别名，不会参数到编译中的</li></ul> <h2 id="枚举细节规则"><a href="#枚举细节规则" class="header-anchor">#</a> 枚举细节规则</h2> <ol><li>枚举的字段值，只能使用字符串或者数字</li> <li>数字枚举的时候，值会自动自增，比如第一个写了1，后面不写，后面就自增1，</li></ol> <ul><li>如果全都不写，第一个就是0，后面自增
enum Level {
level1 = 1,
level2,
level3,
}</li> <li>被数字枚举约束的变量，可以直接赋值为数子，如：let lev:Level = 1；原因是因为位枚举。</li> <li>数据枚举的编译结果，和字符串编译结果有差异，将来枚举数字的时候千万要注意</li> <li>最佳实践</li></ul> <ol><li>尽量不要在一个枚举中，即出现字符串字段，又出现了数字字段</li> <li>使用枚举时，尽量使用枚举的名字字段，不要使用真实值，避免硬编码</li> <li>能使用枚举，就不要使用类型别名，因为会出现上面我们分析的一改全改的情况</li></ol> <h2 id="扩展-位枚举-枚举的位运算符"><a href="#扩展-位枚举-枚举的位运算符" class="header-anchor">#</a> 扩展：位枚举（枚举的位运算符）</h2> <ul><li>针对数字枚举</li> <li>位运算：两个数字换成二进制进行位运算</li> <li>举例：向下面这个实例，利用位运算来控制权限，是非常优雅的，可扩展性也很强。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">enum</span> Permission <span class="token punctuation">{</span>
        Read <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment">//0001</span>
        Write <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//0010</span>
        Create <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token comment">//0100</span>
        Delete <span class="token operator">=</span> <span class="token number">8</span> <span class="token comment">//1000</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 1.组合权限，使用或运算</span>
    <span class="token comment">// 0001 0010 -&gt; 0011</span>
    <span class="token keyword">let</span> p<span class="token operator">:</span>Permission <span class="token operator">=</span> Permission<span class="token punctuation">.</span>Read <span class="token operator">|</span> Permission<span class="token punctuation">.</span>Write

    <span class="token comment">// 2.如何判断是否拥有某个权限, 用与运算</span>
    <span class="token keyword">function</span> <span class="token function">hasPermission</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token operator">:</span>Permission<span class="token punctuation">,</span> per<span class="token operator">:</span>Permission</span><span class="token punctuation">)</span><span class="token operator">:</span>boolean<span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>target <span class="token operator">&amp;</span> per<span class="token punctuation">)</span> <span class="token operator">===</span> Permission<span class="token punctuation">.</span>Read
    <span class="token punctuation">}</span>
    <span class="token comment">// 判断是不是有读权限</span>
    <span class="token function">hasPermission</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> Permission<span class="token punctuation">.</span>Read<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.如何删除某个权限</span>
    <span class="token comment">// 亦或，相同取0，不同1</span>
    <span class="token comment">// 0011 0010 -&gt; 0001 这样就可以删除写权限了；</span>
    p <span class="token operator">=</span> p <span class="token operator">^</span> Permission<span class="token punctuation">.</span>Write
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="接口和类型兼容性"><a href="#接口和类型兼容性" class="header-anchor">#</a> 接口和类型兼容性：</h2> <ol><li>interface，接口。TS中的接口，用于约束类，对象，函数的契约（标准）。</li></ol> <ul><li>举例，电源接口，如果两个充电器的电源接口满足相同的标准，就可以互相拿来充电。</li> <li>只不过，我们以前前端开发的契约标准就是文档形式的。API文档，就是一个契约文档。</li> <li>但是文档作为契约，作为标准的话，是一个弱标准。写代码的时候调用接口时候会写错，没有提示。</li></ul> <h2 id="在代码层次的接口约束-就是强约束-java-c-。"><a href="#在代码层次的接口约束-就是强约束-java-c-。" class="header-anchor">#</a> 在代码层次的接口约束，就是强约束（java, C#）。</h2> <ol start="2"><li>接口约束对象</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">interface</span> <span class="token class-name">IUser</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span>string<span class="token punctuation">,</span>
      age<span class="token operator">:</span>number<span class="token punctuation">,</span>
      sayHello<span class="token operator">?</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span> <span class="token comment">//千万不要在这里写实现，这里是定义。</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> u<span class="token operator">:</span>IUser <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">//强力约束u这个字面量对象必须按照接口标准实现</span>
      name<span class="token operator">:</span><span class="token string">'hrt'</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//那和type User 有什么区别呢？目前区别不大，在约束类中区别就大了。</span>
    <span class="token comment">//在绝大部分场景下，约束对象尽量用接口约束，而尽量不要使用type。</span>
    <span class="token comment">//接口和类型别名一样，不出现在编译结果中。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="3"><li>接口约束函数</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">interface</span> <span class="token class-name">ICallBack</span> <span class="token punctuation">{</span>                  <span class="token comment">//接口约束</span>
         <span class="token punctuation">(</span>n<span class="token operator">:</span>number<span class="token punctuation">)</span><span class="token operator">:</span> boolean
     <span class="token punctuation">}</span>

    type <span class="token function-variable function">ICallBack</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n<span class="token operator">:</span>number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> boolean <span class="token comment">//类型别名</span>

    type ICallBack <span class="token operator">=</span> <span class="token punctuation">{</span>                     <span class="token comment">//定界符号，具体的约束内容</span>
        <span class="token punctuation">(</span>n<span class="token operator">:</span>number<span class="token punctuation">)</span><span class="token operator">:</span> boolean
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">numbers<span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> callBack<span class="token operator">:</span>ICallBack</span><span class="token punctuation">)</span><span class="token operator">:</span>number<span class="token punctuation">{</span>
        <span class="token keyword">let</span> s<span class="token operator">:</span>number <span class="token operator">=</span> <span class="token number">0</span>
        numbers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">callBack</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              s <span class="token operator">+=</span> d
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> s
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> addSum<span class="token operator">:</span>number <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>addSum<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="接口是可以继承的-可以通过继承接口来组合约束。类型别名不行了。"><a href="#接口是可以继承的-可以通过继承接口来组合约束。类型别名不行了。" class="header-anchor">#</a> 接口是可以继承的, 可以通过继承接口来组合约束。类型别名不行了。</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">interface</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
      <span class="token constant">T1</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">interface</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>
      <span class="token constant">T2</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">interface</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token punctuation">{</span> 
      <span class="token constant">T3</span><span class="token operator">:</span>boolean
    <span class="token punctuation">}</span>
    <span class="token comment">// 类型别名实现同样的效果：需要通过 &amp; 符号实现，是交叉类型。</span>
    type <span class="token constant">A</span> <span class="token punctuation">{</span>
      <span class="token constant">T1</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    type <span class="token constant">B</span> <span class="token punctuation">{</span>
      <span class="token constant">T2</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    type <span class="token constant">C</span> <span class="token punctuation">{</span> 
      <span class="token constant">T3</span><span class="token operator">:</span>boolean
    <span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token constant">A</span> <span class="token operator">&amp;</span> <span class="token constant">B</span> <span class="token comment">//C是交叉类型，本身交叉A, B</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="接口和类型别名的差异"><a href="#接口和类型别名的差异" class="header-anchor">#</a> 接口和类型别名的差异：</h2> <ol><li>在接口中，子接口不能覆盖父接口的约束成员。</li> <li>类型别名交叉的时候，相同的成员会交叉约束类型。两个成员的约束类型都会有，不覆盖。</li></ol> <h2 id="readonly修饰符-修饰的目标是只读的"><a href="#readonly修饰符-修饰的目标是只读的" class="header-anchor">#</a> readonly修饰符，修饰的目标是只读的</h2> <ol><li>只读修饰符不参与编译，要注意修饰的目标。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    type <span class="token constant">A</span> <span class="token punctuation">{</span>
      readonly <span class="token constant">T1</span><span class="token operator">:</span>string<span class="token punctuation">,</span> <span class="token comment">//第一次赋值之后，不能再修改，只读</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>比如修饰数组</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">let</span> arr<span class="token operator">:</span> readonly number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
    <span class="token comment">// 注意上面的修饰符号只是修饰类型。</span>
    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span> 
    <span class="token comment">// 凡是涉及改变数组的相关函数/成员的提示就没了，arr[0] = 3; 这样都不行了。只读</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   
    <span class="token comment">// 如果 const arr: readonly number[] = [1,2,3]</span>
    <span class="token comment">// 相当于：cosnt arr: ReadonlyAarray&lt;number&gt; = [1,2,3]</span>
    <span class="token comment">// 注意，如果是修饰成员，写在成员的前面，相当于const。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="类型兼容性"><a href="#类型兼容性" class="header-anchor">#</a> 类型兼容性</h2> <ul><li>两个类型，如果能完成赋值，A = B，则 B和A兼容</li> <li>用得是鸭子辨型法（子结构辩型法）：</li> <li>目标类型（A）约束有某些特征，赋值的类型（B）只要满足该特征即可，可以有多于的属于自己的。</li></ul> <h2 id="对类型的判断"><a href="#对类型的判断" class="header-anchor">#</a> 对类型的判断</h2> <ul><li>基本类型：完全匹配</li> <li>对象类型：鸭子辨型法</li> <li>举例：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>      <span class="token keyword">interface</span> <span class="token class-name">Duck</span> <span class="token punctuation">{</span>
          sound<span class="token operator">:</span><span class="token string">&quot;嘎嘎嘎&quot;</span>
          <span class="token function-variable function">swin</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span><span class="token string">'伪装成鸭子的人'</span><span class="token punctuation">,</span>
          age<span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span>
          <span class="token comment">// 类型断言，sound:&quot;嘎嘎嘎&quot; 这样的写的话TS会自动推断出sound的类型为string。</span>
          <span class="token comment">// 用了类型断言就是&quot;嘎嘎嘎&quot;类型的&quot;嘎嘎嘎&quot;值了；其实就是更换类型。</span>
          <span class="token comment">// 类型断言也可以在前面加&lt;Type&gt;来使用, &lt;&quot;嘎嘎嘎&quot;&gt;&quot;嘎嘎嘎&quot;</span>
          sound<span class="token operator">:</span><span class="token string">&quot;嘎嘎嘎&quot;</span> <span class="token keyword">as</span> <span class="token string">&quot;嘎嘎嘎&quot;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">swin</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 这就是鸭子辨型法，可以完成赋值</span>
      <span class="token comment">// 但是，不能直接把person的字面量对象直接写过来。</span>
      <span class="token comment">// 如果直接写过来，就更加严格了，只能是个鸭子</span>
      <span class="token keyword">let</span> duck<span class="token operator">:</span>Duck <span class="token operator">=</span> person  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="函数类型-一切无比的自然-但是返回值如果在约束的时候就要求返回就一定要返回"><a href="#函数类型-一切无比的自然-但是返回值如果在约束的时候就要求返回就一定要返回" class="header-anchor">#</a> 函数类型：一切无比的自然，但是返回值如果在约束的时候就要求返回就一定要返回</h2> <ul><li>函数的参数，也是鸭子辩型法</li> <li>实例：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">//函数参数的鸭子辨型法</span>
    <span class="token keyword">interface</span> <span class="token class-name">ICallBack</span> <span class="token punctuation">{</span> 
        <span class="token punctuation">(</span>n<span class="token operator">:</span>number<span class="token punctuation">,</span> i<span class="token operator">:</span>number<span class="token punctuation">)</span><span class="token operator">:</span> boolean
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">numbers<span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> callBack<span class="token operator">:</span>ICallBack</span><span class="token punctuation">)</span><span class="token operator">:</span>number<span class="token punctuation">{</span>
        <span class="token keyword">let</span> s<span class="token operator">:</span>number <span class="token operator">=</span> <span class="token number">0</span>
        numbers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 注意这里接口约束要传两个</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">callBack</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              s <span class="token operator">+=</span> d
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> s
    <span class="token punctuation">}</span>
                          <span class="token comment">//注意这里实际调用的时候根本没传完喔！ </span>
    <span class="token keyword">let</span> addSum<span class="token operator">:</span>number <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token comment">// js的高阶函数forEach, map, filter都是这样的自然</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="类-面向对象思想、是一种思维模式"><a href="#类-面向对象思想、是一种思维模式" class="header-anchor">#</a> 类（面向对象思想、是一种思维模式）</h2> <ul><li>基础部分，仅考虑新增的语法部分，后面再讨论面向对象的思想</li> <li>使用属性列表来描述，不能像以前JS一样动态的赋值增加</li></ul> <ol><li>属性的初始化检查，&quot;strictPropertyInitialization&quot;: true  //更加严格的属性检查，检查初始化</li> <li>构造函数中检查有没有赋值，或者属性列表有没有初始化默认值</li> <li>属性可以修饰为可选的，用问号?</li> <li>有些属性初始化之后就不能改变了, 用 readonly 修饰</li> <li>有些属性是不希望外部能读取的，使用访问修饰符。可以控制类中的某个成员的访问权限</li></ol> <ul><li>public 默认是这个访问权限，公开的，所有都可以访问</li> <li>private 私有的，只有在类中使用</li> <li>protected 受保护的，暂时不考虑</li> <li>可以在构造函数的形参增加一个访问修饰符，可以这样简写。达到传参赋初值效果（不做任何操作的初始化赋值才可以）</li></ul> <h2 id="感受一下下面的实例"><a href="#感受一下下面的实例" class="header-anchor">#</a> 感受一下下面的实例：</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>   <span class="token comment">// &quot;strictPropertyInitialization&quot;: true  更加严格的属性检查，检查属性初始化</span>
   <span class="token keyword">class</span> <span class="token class-name">name</span> <span class="token punctuation">{</span>
       <span class="token comment">//属性列表</span>
       readonly id<span class="token operator">:</span>number<span class="token punctuation">;</span>              <span class="token comment">//只读, 相当于const</span>
       gender<span class="token operator">:</span><span class="token string">'男'</span> <span class="token operator">|</span> <span class="token string">'女'</span> <span class="token operator">=</span> <span class="token string">'男'</span>
       <span class="token keyword">public</span> pid<span class="token operator">?</span><span class="token operator">:</span> string
       <span class="token keyword">private</span> publishNumber<span class="token operator">:</span>number <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">//每天一共可以发多少篇文章</span>
       <span class="token keyword">private</span> curNumber<span class="token operator">:</span>number <span class="token operator">=</span> <span class="token number">0</span>     <span class="token comment">//当前可以发布的文章数量</span>
       <span class="token comment">// 可以在形参中加修饰符达到初始化的效果。简化繁琐代码</span>
       <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> name<span class="token operator">:</span>string<span class="token punctuation">,</span> <span class="token keyword">public</span> age<span class="token operator">:</span>number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
       <span class="token keyword">public</span> <span class="token function">publish</span><span class="token punctuation">(</span><span class="token parameter">title<span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>publishNumber <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>curNumber<span class="token punctuation">)</span><span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'发布了一篇文章'</span><span class="token punctuation">,</span> title<span class="token punctuation">)</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>curNumber<span class="token operator">++</span>
         <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'不能发布文章了'</span><span class="token punctuation">)</span>
         <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">name</span><span class="token punctuation">(</span><span class="token string">'hrt'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
   user<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'文章1'</span><span class="token punctuation">)</span>
   user<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'文章2'</span><span class="token punctuation">)</span>
   user<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'文章3'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="访问器-用于控制属性的读取和赋值"><a href="#访问器-用于控制属性的读取和赋值" class="header-anchor">#</a> 访问器，用于控制属性的读取和赋值</h2> <ul><li>某些类的属性，要受一定的限制控制，如年龄不能是小数，负数</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">class</span> <span class="token class-name">name</span> <span class="token punctuation">{</span>
        <span class="token comment">// 可以在形参中加修饰符达到初始化的效果。简化繁琐代码</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> name<span class="token operator">:</span>string<span class="token punctuation">,</span> <span class="token keyword">private</span> _age<span class="token operator">:</span>number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 利用private控制，getAge() 是java的做法</span>
        <span class="token comment">// C# 是这样做的 get age，用的时候就像普通对象的获取</span>
        <span class="token comment">// ES6 的时候，也是这样玩的，其实这样也相当于是readonly</span>
        <span class="token comment">// C# 规范，写私有属性的时候尽量前面加下划线</span>
        <span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_age
        <span class="token punctuation">}</span>
        <span class="token keyword">set</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token operator">:</span> number</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 类的属性，要受一定的限制控制</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>age <span class="token operator">&gt;=</span> <span class="token number">18</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token keyword">return</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> age
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">name</span><span class="token punctuation">(</span><span class="token string">'hrt'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
    user<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'文章1'</span><span class="token punctuation">)</span>
    user<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'文章2'</span><span class="token punctuation">)</span>
    user<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'文章3'</span><span class="token punctuation">)</span>
    user<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="泛型-重点类型后面会频繁使用"><a href="#泛型-重点类型后面会频繁使用" class="header-anchor">#</a> 泛型，重点类型后面会频繁使用</h2> <ul><li>有时候，书写某个函数时候，会丢失一些信息。（多个位置类型应该保持一致或者有关联的信息）</li> <li>泛型：是指附属于函数、类、接口、类型别名之上的类型</li> <li>如果，需要丢失的这些信息，就需要泛型了。</li></ul> <h2 id="在函数中使用泛型"><a href="#在函数中使用泛型" class="header-anchor">#</a> 在函数中使用泛型：</h2> <ul><li>注意先看举例</li></ul> <ol><li>在函数名之后写上两个尖括号加泛型名称</li> <li>泛型就相当于类型变量，一般用T表示，定义的时候不知道什么类型，运行的时候才能确定是什么类型</li> <li>执行语句如果不使用指定泛型的类型，take([1, '2', 3], 2)，就不会报错了。</li> <li>因为TS可以类型推导，很多时候，TS可以智能的推导出类型，前提是使用了泛型。</li> <li>如果无法完成推导，并且有没有传递具体的类型，默认为空对象（相当于any）</li> <li>定义时候泛型可以使用默认值，不指定就是默认值。如：take&lt;T = number&gt;</li> <li>泛型是一个地方确定类型了，就可以推导确定出具体的类型了。</li></ol> <ul><li>举例：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token comment">// T表示泛型，依附于这个函数，泛型就相当于类型变量</span>
  <span class="token keyword">function</span> take<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arr<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> n<span class="token operator">:</span>number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&gt;=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> arr
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> res<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> element <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
          res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> res
  <span class="token punctuation">}</span>
  <span class="token comment">// 调用函数的时候才知道什么类型</span>
  <span class="token comment">// 这样就能把丢失的信息（类型）找回来了</span>
  take<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//指定类型的话，里面有字符串类型，就会报错；</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="泛型在类、接口、类型别名上的应用"><a href="#泛型在类、接口、类型别名上的应用" class="header-anchor">#</a> 泛型在类、接口、类型别名上的应用</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code> type <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n<span class="token operator">:</span>number<span class="token punctuation">,</span> i<span class="token operator">:</span>number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> boolean
 type callback<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n<span class="token operator">:</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> i<span class="token operator">:</span>number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> boolean
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>类：通过约束类的泛型，类下面的函数成员等，就直接是根据类实例化的时候的泛型</li> <li>接口和函数也差不多</li> <li>泛型，其实就是泛指的类型，也就是不能暂时确定的类型。</li> <li>泛型约束：函数使用泛型，参数是泛型，返回值也是泛型<code>&lt;T&gt;</code>, 对T进行一些约束。<code>&lt;T extends XXX&gt;</code>, 这样子一约束之后，到时候传过来的类型，必须满足XXX，鸭子辨型法。</li></ul> <h2 id="多泛型"><a href="#多泛型" class="header-anchor">#</a> 多泛型</h2> <ul><li>在ts+react中的类型声明文件有很多用例，注意实践多练多查</li></ul> <h2 id="模块化"><a href="#模块化" class="header-anchor">#</a> 模块化</h2> <ul><li>前端领域的模块化标准：ES6，commonjs/amd/cmd/umd/system/esnext</li> <li>前两个是讨论的重点</li></ul> <ol><li>TS中如何书写模块化语句</li></ol> <ul><li>TS中，导入和导出，统一使用es6的模块化标准</li> <li>尽量不要使用默认导出，因为没有智能提示 export default。应该用export</li> <li>导入的时候不要添加后缀名</li></ul> <ol start="2"><li>编译结果中的模块化</li></ol> <ul><li>如果编译标准是ES6，没有区别</li> <li>如果编译结果的模块化标准是commonJS，导出的声明，会变成exports的属性</li></ul> <h2 id="小总结"><a href="#小总结" class="header-anchor">#</a> 小总结：</h2> <ol><li>基本类型：boolean number string object Array void never null undefined</li> <li>字面量类型：具体的对象，或者元组</li> <li>扩展类型：类型别名，枚举，接口，类。（实际上还有很多高级的联合类型）</li> <li>类型别名和接口不产生编译结果，枚举和类产生编译结果。（枚举产生的就是类，类没啥区别）</li> <li>TS类：访问修饰符，readonly, 一些访问修饰符（public等）</li> <li>泛型：解决某个功能和类型的耦合。（其实就是抽出一个通用的方法，方便代码重用）</li> <li>类型兼容性：鸭子辨型法，子结构辨型法。（A如果想赋值给B，A必须满足B的结构，A的属性可以多不可以少）</li> <li>类型兼容性，在函数类型兼容的时候，参数是可以少的，但是不可以多。要求返回必须返回，不要求你随缘</li> <li>类型断言：开发者非常清楚某个类型，但是TS分辨不出来，可以用类型断言 as</li> <li>TS有很多的内置关键类型，像<code>ReturnType&lt;T&gt;</code>之类的，用到时候可以查文档</li> <li>TS 还有 keyof、is 之类的关键字，用到时候也可以多查阅文档</li></ol> <h2 id="深入理解类和接口"><a href="#深入理解类和接口" class="header-anchor">#</a> 深入理解类和接口</h2> <ul><li>面向对象：以类为切入点进行编程。(可以产生对象的模版)</li> <li>人：</li> <li>特征（属性）：眼睛，鼻子，嘴巴四肢，性别</li> <li>动作（方法）：说话，运动，制造工具</li> <li>react：类组件，可以产生对象的模版</li> <li>如何学习？</li> <li>TS的OOP（Oriented Object Programing）</li> <li>开发小游戏很锻炼思维，多实践</li></ul> <h2 id="里氏替换原则"><a href="#里氏替换原则" class="header-anchor">#</a> 里氏替换原则</h2> <ul><li>类型匹配：</li> <li>TS 用的是鸭子辨型法。子类的对象，始终可以赋值给父类；在面向对象中，这种现象叫做里氏替换原则。</li> <li>如果要判断具体的子类型，用 instanceof 即可</li></ul> <h2 id="继承的作用"><a href="#继承的作用" class="header-anchor">#</a> 继承的作用</h2> <ol><li>继承可以描述类与类之间的关系，如A和B</li></ol> <ul><li>B是父类，A是子类</li> <li>B派生A，A继承自B</li> <li>B是A的基类，A是B的派生类</li> <li>A继承自B，会拥有B的所有方法和属性</li> <li>子类的对象，始终可以赋值给父类。（鸭子辨型法）</li> <li>实例：</li> <li>let a:B = new A()</li> <li>a变量中的this指向还是正常的，还是执行A的实例</li> <li>此时a只能使用子类和父类共有的方法，因为你声明的是B父类。就是A子类有多余的都不能使用，一般不会这么奇葩写</li> <li>instanceof 判断具体是哪个子类型。</li></ul> <h2 id="成员的重写-override"><a href="#成员的重写-override" class="header-anchor">#</a> 成员的重写（override）</h2> <ul><li>子类中覆盖父类的成员,这就叫重写</li> <li>重写不能改变父类成员的类型（属性）</li> <li>重写方法的时候，子类参数要和父类一样，返回值可以不一样，但差别太大就没必要使用同一个方法</li> <li>重写方法的时候，要注意this指向</li> <li>super：在子类的方法中，可以使用super读取父类的成员。super和this是有区别的。</li></ul> <h2 id="protected-private-public"><a href="#protected-private-public" class="header-anchor">#</a> protected private public</h2> <ul><li>编译结果没有访问修饰符</li> <li>readonly：只读修饰符</li> <li>protected：受保护成员，只能在自身或者子类使用</li> <li>private：私有的，只能自己使用</li> <li>public：公共的，默认的</li></ul> <h2 id="继承的单根性和传递性"><a href="#继承的单根性和传递性" class="header-anchor">#</a> 继承的单根性和传递性</h2> <ul><li>单根性：每个类最多只能拥有一个父类。</li> <li>传递性：如果A是B的父类，并且B也是C的父类，则A也是C的父类</li></ul> <h2 id="抽象类"><a href="#抽象类" class="header-anchor">#</a> 抽象类</h2> <ul><li>为什么需要抽象类？</li> <li>中国象棋为例子，游戏里面存在各种棋子，棋子对象是抽象的，兵、马、炮这样的才是具体的实例</li> <li>js 无法描述抽象类，TS可以</li> <li>abstract class Chess { }</li> <li>有时某个类只是表示抽象的概念，用于提取子类的公有成员，而不能直接创建它的实例对象。</li> <li>该类可以作为抽象类，主要是为了解决代码重复的问题。</li> <li>抽象类只能用于继承，不能创建实例。抽象类是一个强约束，用于对类的强约束。</li> <li>如果抽象类中某个成员必须要子类实现，也可以使用abstract来进行强约束，要求子类一定要实现。</li> <li>抽象成员必须出现在抽象类中。</li> <li>抽象类可以再次继承抽象类，抽象类中可以先实现抽象成员，也可以到具体的子类再实现。</li> <li>这样的强约束，对于维护和团队合作是非常好的。</li></ul> <h2 id="静态成员-static"><a href="#静态成员-static" class="header-anchor">#</a> 静态成员 static</h2> <ul><li>属于某个构造函数的成员, 不附属在实例上，就要加上static关键字</li> <li>静态方法中的this, 执向的是当前类</li></ul> <h2 id="再谈接口"><a href="#再谈接口" class="header-anchor">#</a> 再谈接口</h2> <ul><li>接口用于约束类，对象、函数，是一个类型契约。</li> <li>在类的实例中，方法没有强约束力。容易将类型和方法耦合在一起。</li> <li>例如：A, B 继承自C。A，B有各自的方法，在某处要一起调用，就需要instance判断类型了。</li> <li>系统缺失对能力（方法）的定义 - 解决办法（接口）</li> <li>面向对象领域中的接口的语义：表达了某个类是否拥有某种能力（方法）</li> <li>某个类具有某种能力，其实，就是实现了某种接口。implements interface（可以实现多个接口）</li> <li>如果implements实现了某种能力，必须要实现，不实现会报错。</li> <li>例子：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">interface</span> <span class="token class-name">IDown</span><span class="token punctuation">{</span>
      <span class="token function">down</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">Children</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token keyword">implements</span> <span class="token class-name">IDown</span><span class="token punctuation">{</span>
        <span class="token function">down</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Method not implemented.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="类型保护函数-相当于-a-instanceof-idown-java中可以这么用ts不行。"><a href="#类型保护函数-相当于-a-instanceof-idown-java中可以这么用ts不行。" class="header-anchor">#</a> 类型保护函数：相当于 a instanceof IDown, java中可以这么用TS不行。</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isHasIDown</span><span class="token punctuation">(</span><span class="token parameter">chi<span class="token operator">:</span> object</span><span class="token punctuation">)</span><span class="token operator">:</span> chi is IDown <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>chi <span class="token keyword">as</span> unknown <span class="token keyword">as</span> IDown<span class="token punctuation">)</span><span class="token punctuation">.</span>方法<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>接口和类型别名的最大区别：接口可以被类实现，类型别名不行</li> <li>接口可以继承类，表示该类的所有成员都在接口中</li> <li>实例：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>
        age<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">interface</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">let</span> c<span class="token operator">:</span><span class="token constant">C</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span><span class="token string">'C'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="索引器"><a href="#索引器" class="header-anchor">#</a> 索引器</h2> <p><code>对象[值]</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span>prop<span class="token operator">:</span>string<span class="token punctuation">]</span><span class="token operator">:</span>string
      name<span class="token operator">:</span>string <span class="token operator">=</span> <span class="token string">'hrt'</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>索引器要写在最前面</li> <li>在严格的检查下，可以动态的增加成员</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span>prop<span class="token operator">:</span>string<span class="token punctuation">]</span><span class="token operator">:</span>string
      name<span class="token operator">:</span>string <span class="token operator">=</span> <span class="token string">'1'</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> c<span class="token operator">:</span><span class="token constant">A</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  c<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;ss&quot;</span>
  c<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token string">'2222'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="类this指向问题"><a href="#类this指向问题" class="header-anchor">#</a> 类this指向问题</h2> <ul><li>TS类中其实是使用了严格模式的，下面这样用会导致this为undefined</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span>string <span class="token operator">=</span> <span class="token string">'hrt'</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> c<span class="token operator">:</span><span class="token constant">A</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> s <span class="token operator">=</span> c<span class="token punctuation">.</span>say
  <span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>而如果使用字面量的形式，this是any类型的</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'hrt'</span><span class="token punctuation">,</span>
      <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//this是any类型的</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> s <span class="token operator">=</span> c<span class="token punctuation">.</span>say
  <span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>TS允许在书写函数的时候，手动声明该函数的this指向，</li> <li>将this作为第一个参数，只用于约束this，不是真正的参数，也不会出现在编译结果中。</li> <li>接口强约束了this指向，防止this乱指向，压根就犯不了错误。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">interface</span> <span class="token class-name">IUser</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span>string<span class="token punctuation">,</span>
    age<span class="token operator">:</span>number<span class="token punctuation">,</span>
    <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span>IUser<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token comment">//强行约束this</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> c<span class="token operator">:</span>IUser <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'hrt'</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>
      <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> s <span class="token operator">=</span> c<span class="token punctuation">.</span>sayHello
  <span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//报错</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="类型演算"><a href="#类型演算" class="header-anchor">#</a> 类型演算</h2> <ul><li>根据已知的信息，来计算出新的类型</li> <li>类型演算和计算出新的类型在一些大型的UI库上特别有用。像antd/antd pro</li> <li>把一个变量约束为构造函数可以 new () =&gt; C 或者 typeof</li></ul> <h2 id="三个关键字"><a href="#三个关键字" class="header-anchor">#</a> 三个关键字</h2> <ol><li>typeof</li></ol> <ul><li>js得到一个数据的类型, ts中的typeof书写在类型约束的位置上</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// js中的 typeof</span>
  <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token string">'111'</span>
  <span class="token keyword">typeof</span> a <span class="token comment">// string</span>
  <span class="token comment">// ts 中的typeof，表示获取到的数据类型</span>
  <span class="token comment">// b 的类型和 a 的类型保持一致，就用typeof</span>
  <span class="token keyword">let</span> b<span class="token operator">:</span><span class="token keyword">typeof</span> a <span class="token operator">=</span> <span class="token string">&quot;aaa&quot;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>注意，当typeof作用于类的时候，得到的是该类的构造函数</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
   <span class="token comment">//  </span>
   <span class="token keyword">function</span> <span class="token function">careteUser</span><span class="token punctuation">(</span><span class="token parameter">cls<span class="token operator">:</span>User</span><span class="token punctuation">)</span><span class="token operator">:</span> User <span class="token punctuation">{</span> <span class="token comment">//1. 返回值要求的是 new User()，不是User</span>
     <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">cls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment">//2. 如果传new User()，这里必须是一个构造函数</span>
   <span class="token punctuation">}</span> 
   <span class="token comment">//传类，参数不匹配</span>
   <span class="token keyword">const</span> u <span class="token operator">=</span> <span class="token function">careteUser</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span>

   <span class="token comment">//那怎么办才能满足这奇葩需求呢？ </span>
   <span class="token comment">//1. 构造函数约束</span>
   <span class="token keyword">function</span> <span class="token function">careteUser</span><span class="token punctuation">(</span><span class="token parameter">cls<span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> User</span><span class="token punctuation">)</span>
   <span class="token comment">//2. 或者这么干, typeof typeof作用于类的时候，得到的是该类的构造函数（是个类型）</span>
   <span class="token keyword">function</span> <span class="token function">careteUser</span><span class="token punctuation">(</span><span class="token parameter">cls<span class="token operator">:</span><span class="token keyword">typeof</span> User</span><span class="token punctuation">)</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="2"><li>keyof</li></ol> <ul><li>作用于类、接口、类型别名，用于获取其它类型中的所有成员名，组成的联合类型</li> <li>很有用的一个关键字</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">interface</span> <span class="token class-name">IUser</span> <span class="token punctuation">{</span> 
    pw<span class="token operator">:</span>string<span class="token punctuation">,</span>
    age<span class="token operator">:</span>number<span class="token punctuation">,</span>
    id<span class="token operator">:</span>string   
  <span class="token punctuation">}</span>
  <span class="token comment">// 怎么约束prop呢？ 它应该是某个具体类型的一个属性</span>
  <span class="token comment">// keyof User 相当于 type prop = pw | age | id</span>
  <span class="token keyword">function</span> <span class="token function">printUserProperty</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token operator">:</span>User<span class="token punctuation">,</span> prop<span class="token operator">:</span>keyof User</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//obj[prop]</span>
  <span class="token punctuation">}</span>
  <span class="token function">printUserProperty</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="3"><li>in</li></ol> <ul><li>该关键字往往和keyof 一起用，该关键字往往和keyof联用，限制某个索引类型的取值范围</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  type Obj <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token comment">//属性和值是字符串是string就满足条件</span>
     <span class="token comment">//怎么进一步约束取值范围呢？太广阔了  </span>
     <span class="token punctuation">[</span>p<span class="token operator">:</span>string<span class="token punctuation">]</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
     <span class="token comment">// in 操作符，in 一个联合类型就行了</span>
     <span class="token punctuation">[</span>p <span class="token keyword">in</span> <span class="token string">&quot;pw&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;age&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token operator">:</span> string<span class="token punctuation">,</span>  

  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> u<span class="token operator">:</span>Obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  u<span class="token punctuation">.</span>abc <span class="token operator">=</span> <span class="token string">&quot;sss&quot;</span>
  <span class="token comment">// ========&gt; 分割线</span>
  <span class="token comment">// 最佳写法 in keyof xxx</span>
  <span class="token comment">// 得到一个新类型Obj，将IUser所有属性值类型变成了字符串</span>
  type Obj <span class="token operator">=</span> <span class="token punctuation">{</span> 
     <span class="token punctuation">[</span>p <span class="token keyword">in</span> keyof IUser<span class="token punctuation">]</span><span class="token operator">:</span> string<span class="token punctuation">,</span>  
  <span class="token punctuation">}</span>
  <span class="token comment">// ========&gt; 分割线</span>
  <span class="token comment">// 还可以这么玩</span>
  type newObj <span class="token operator">=</span> <span class="token punctuation">{</span> 
     <span class="token punctuation">[</span>p <span class="token keyword">in</span> keyof IUser<span class="token punctuation">]</span><span class="token operator">:</span> IUser<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">,</span>  
  <span class="token punctuation">}</span>
  <span class="token comment">// ========&gt; 分割线</span>
  <span class="token comment">// 还可以这么玩，全设成只读的</span>
  type newObj <span class="token operator">=</span> <span class="token punctuation">{</span> 
     readonly <span class="token punctuation">[</span>p <span class="token keyword">in</span> keyof IUser<span class="token punctuation">]</span><span class="token operator">:</span> IUser<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">,</span>  
  <span class="token punctuation">}</span>
  <span class="token comment">// ========&gt; 分割线</span>
  <span class="token comment">// 还可以这么玩，全设成可选的</span>
  type newObj <span class="token operator">=</span> <span class="token punctuation">{</span> 
    <span class="token punctuation">[</span>p <span class="token keyword">in</span> keyof IUser<span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> IUser<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">,</span>  
  <span class="token punctuation">}</span>
  <span class="token comment">// 这样不够通用，可以利用泛型</span>
  type Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> 
    <span class="token punctuation">[</span>p <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">,</span>  
  <span class="token punctuation">}</span>
  type ReadyOnly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> 
    readonly <span class="token punctuation">[</span>p <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">,</span>  
  <span class="token punctuation">}</span>
  type String<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> 
    <span class="token punctuation">[</span>p <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> string<span class="token punctuation">,</span>  
  <span class="token punctuation">}</span>
  type Required<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// -? 就是把问号去掉</span>
    <span class="token punctuation">[</span>p <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">,</span> 
  <span class="token punctuation">}</span>
  type Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 选择某些类型	</span>
  type Person <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> string<span class="token punctuation">;</span>
      age<span class="token operator">:</span> number<span class="token punctuation">;</span>
      location<span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  type RemainingKeys <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span>keyof Person<span class="token punctuation">,</span> <span class="token string">&quot;location&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  type QuantumPerson <span class="token operator">=</span> Pick<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> RemainingKeys<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token comment">// equivalent to</span>
  type QuantumPerson <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> string<span class="token punctuation">;</span>
      age<span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// QuantumPerson or equivalent to</span>
  type QuantumPerson <span class="token operator">=</span> Omit<span class="token operator">&lt;</span>QuantumPerson<span class="token punctuation">,</span> <span class="token string">&quot;location&quot;</span><span class="token operator">&gt;</span>
  <span class="token comment">// equivalent to</span>
  type Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Exclude<span class="token operator">&lt;</span>keyof <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h2 id="类型演算其实就是根据已知类型可关键字演算出新的类型-很实用"><a href="#类型演算其实就是根据已知类型可关键字演算出新的类型-很实用" class="header-anchor">#</a> 类型演算其实就是根据已知类型可关键字演算出新的类型，很实用</h2> <ul><li>ts中的预设类型演算</li></ul> <ol><li><code>Partial&lt;T&gt;</code>，将类型变成可选</li> <li><code>Required&lt;T&gt;</code>，将类型变成必选</li> <li><code>ReadyOnly&lt;T&gt;</code>, 只读</li> <li>```Exclude&lt;T, U&gt;``，从T中剔除可以赋值给U的类型</li></ol> <ul><li>```type Exclude&lt;T, U&gt; = T extends U ? never : T``</li> <li>这里的 extends 表示匹配不是继承，鸭子辩型法，never表示不存在</li></ul> <ol start="5"><li><code>Extract&lt;T, U&gt;</code>，提取T中可以赋值给U的类型，和Exclude相反</li></ol> <ul><li><code>type Extract&lt;T, U&gt; = T extends U ? T : never</code></li></ul> <ol start="6"><li><code>NonNullable&lt;T&gt;</code>，从T中剔除null和undefined</li> <li><code>ReturnType&lt;T&gt;</code>，获取函数返回类型</li></ol> <ul><li>infer 表示推断类型关键字，了解一下</li> <li>如果是一个普通函数，要这么用 <code>let a:ReturnType&lt;typeof func&gt;;</code></li> <li>因为func是一个函数，不是类型，typeof就可以得到构造函数</li></ul> <ol start="8"><li><code>InstanceType&lt;T&gt;</code>，获取构造函数类型的实例类型</li></ol> <ul><li>和 ReturnType 差不多，获取的是构造函数类型的实例类型</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  type towParamsConstructor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token parameter">arg1<span class="token operator">:</span>any<span class="token punctuation">,</span> arg2<span class="token operator">:</span>any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> User
  <span class="token keyword">const</span> <span class="token constant">A</span><span class="token operator">:</span>towParamsConstructor <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token comment">// 鸭子辩型法，不报错，但是constructor参数不能多</span>
    <span class="token comment">// 但是我想要得到构造函数返回的类型是啥？</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">:</span>any<span class="token punctuation">,</span> a<span class="token operator">:</span>any</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// =========&gt; 这样就可以得到 towParamsConstructor 返回的类型了</span>
  type towParamsConstructor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token parameter">arg1<span class="token operator">:</span>any<span class="token punctuation">,</span> arg2<span class="token operator">:</span>any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> User
  type Inst <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span>towParamsConstructor<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="9"><li>Pick</li></ol> <ul><li>选择，在T中选择K，K是T的子集 <code>Pick&lt;T, K extends keyof T&gt;</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> string<span class="token punctuation">;</span>
        age<span class="token operator">?</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    type person5 <span class="token operator">=</span> Pick<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">//  person5 === {name: string}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="10"><li>Omit 忽略对象某些属性功能
<code>type Omit&lt;T, K&gt; = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;</code></li></ol> <ul><li><code>Omit&lt;T, K extends keyof any&gt;</code>，在T中选择除了K的类型，keyof any 表示任何类型</li> <li>在泛型里面 <code>extends</code> 关键字是约束的意思，不是继承</li></ul> <ol start="11"><li>Record 将 K 中所有的属性的值转化为 T 类型
<code>type Record&lt;K extends keyof any, T&gt; = { [P in K]: T };</code></li></ol> <ul><li>keyof any表示可以用作对象索引的任何值的类型。</li> <li>在Record类型中，这 K extends keyof any 用于约束K某些对象，该对象是对象的有效键。所以，K目前为 number string symbol 三种</li></ul> <ol start="12"><li>AxiosReturnType (未包含)
开发经常使用 axios 进行封装 API层 请求, 通常是一个函数返回一个<code>AxiosPromise&lt;Resp&gt;</code>, 现在我想取到它的 Resp 类型, 根据上一个工具泛型的知识我们可以这样写.</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">import</span> <span class="token punctuation">{</span> AxiosPromise <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span> <span class="token comment">// 导入接口</span>
  type AxiosReturnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> AxiosPromise<span class="token operator">&lt;</span>infer <span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> any
  <span class="token comment">// 使用</span>
  type Resp <span class="token operator">=</span> AxiosReturnType<span class="token operator">&lt;</span>Api<span class="token operator">&gt;</span> <span class="token comment">// 泛型参数中传入你的 Api 请求函数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="13"><li>Exclude</li></ol> <ul><li>T extends U ? X : Y</li> <li>以上语句的意思就是 如果 T 是 U 的子类型的话，那么就会返回 X，否则返回 Y</li> <li>甚至可以组合多个</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  type TypeName<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">string</span> <span class="token operator">?</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">:</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">number</span> <span class="token operator">?</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">:</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">boolean</span> <span class="token operator">?</span> <span class="token string">&quot;boolean&quot;</span> <span class="token operator">:</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">undefined</span> <span class="token operator">?</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">:</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">:</span>
    <span class="token string">&quot;object&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="14"><li>去掉可能为空的属性键名</li></ol> <ul><li>https://mariusschulz.com/blog/conditional-types-in-typescript 强推好文</li> <li>never 为TS内置的不可达类型，就是没有意义，不可达</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    type NonNullablePropertyKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">//[P in keyof T]，p是T的所有属性，null extends T[P] ? never : P，约束属性值必须不为null</span>
      <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token operator">?</span> never <span class="token operator">:</span> <span class="token constant">P</span>
      <span class="token comment">// 得到结果：</span>
      <span class="token comment">// name: &quot;name&quot;;</span>
      <span class="token comment">// email: never;</span>
      <span class="token comment">// [keyof T]，A[B]的意思，由于never没有意义，所以只会拿出 &quot;name&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">[</span>keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 

    type User <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> string<span class="token punctuation">;</span>
      email<span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// &quot;name&quot;</span>
    type NonNullableUserPropertyKeys <span class="token operator">=</span> NonNullablePropertyKeys<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 配合Pick&lt;T, U&gt;, 就可以选择属性不为空的类型别名</span>
    type NonNullableProperties<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> NonNullablePropertyKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// { name: string }</span>
    type NonNullableUserProperties <span class="token operator">=</span> NonNullableProperties<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ol start="15"><li>得到一个元组类型，元组类型是函数所有形参的类型</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Obtain the parameters of a function type in a tuple
 */</span>
type Parameters<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> infer <span class="token constant">P</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any
    <span class="token operator">?</span> <span class="token constant">P</span>
    <span class="token operator">:</span> never<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="声明文件"><a href="#声明文件" class="header-anchor">#</a> 声明文件</h2> <ol><li>什么是声明文件？</li></ol> <ul><li>在ts中以<code>.d.ts</code>结尾的就是声明文件</li></ul> <ol start="2"><li>声明文件有什么用？</li></ol> <ul><li>以前的代码都是js写的，ts使用js的代码时候，得不到类型声明，不知道js里面有什么类型</li> <li>那怎么告诉ts，js里面的代码类型呢？无需修改原来的js代码</li> <li>简而言之，就是为js提供类型声明，这就是声明文件的作用</li></ul> <ol start="3"><li>声明文件的位置放在哪里会生效？</li></ol> <ul><li>放置到 tsconfig.json 配置中包含的目录中，就是配置文件的include:[&quot;./src&quot;]配置</li> <li>可以放在node_modules/@types文件夹中，安装的js代码的库的声明文件都在这</li> <li>手动配置，tsconfig.json 中的 &quot;typeRoots:[]&quot;, 启用这个配置，前面两条就失效</li> <li>还有一种比较好的方式，与js代码所在的文件目录相同，文件名字相同。</li></ul> <h1 id="react-ts-结合会有很多的坑"><a href="#react-ts-结合会有很多的坑" class="header-anchor">#</a> react + ts 结合会有很多的坑！！！</h1> <ol><li>某个组件有哪些属性需要传递？（antd 官方文档）</li> <li>某个组件有某个属性，需要传具体的属性类型</li> <li>传递事件的时候，具体需要传的参数</li> <li>错误发生在运行时</li></ol> <ul><li><p>可以通过propsTypes约束属性的类型，但是错误发生在运行时。</p></li> <li><p>ts都可以解决这些问题（F12看定义的声明文件，需要有一定的TS基础）</p></li> <li><p>external 打包文件太大可以配置外部依赖</p></li></ul> <h2 id="_2020-04-06-二次学习ts的一些坑"><a href="#_2020-04-06-二次学习ts的一些坑" class="header-anchor">#</a> 2020-04-06 二次学习TS的一些坑</h2> <ol><li>如果TS配置了可以识别JSX语法的话，类型断言只能使用as 语法，不能使用尖括号</li></ol> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">extend</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> object<span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> object<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>first<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> second<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">in</span> first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果TS配置了可以识别JSX语法，这里是会报错的</span>
    <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>result<span class="token punctuation">)</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> first<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">in</span> second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span>result<span class="token punctuation">)</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> second<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'hello'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="允许使用额外的属性"><a href="#允许使用额外的属性" class="header-anchor">#</a> 允许使用额外的属性</h2> <ul><li>在React antd 中会经常使用到；</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

x <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// ok, 'baz' 属性匹配于索引签名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="自定义类型保护函数"><a href="#自定义类型保护函数" class="header-anchor">#</a> 自定义类型保护函数</h2> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// 仅仅是一个 interface</span>
<span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  common<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Bar</span> <span class="token punctuation">{</span>
  bar<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  common<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 用户自己定义的类型保护！</span>
<span class="token comment">// 使用的时候就知道具体是什么类型了</span>
<span class="token keyword">function</span> <span class="token function">isFoo</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Foo <span class="token operator">|</span> Bar<span class="token punctuation">)</span><span class="token operator">:</span> arg <span class="token keyword">is</span> Foo <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>arg <span class="token keyword">as</span> Foo<span class="token punctuation">)</span><span class="token punctuation">.</span>foo <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="枚举类型"><a href="#枚举类型" class="header-anchor">#</a> 枚举类型</h2> <ul><li>自定义枚举类型 <code>{ [K in T]: K }</code> 返回类型，索引签名</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">strEnum</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>o<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">K</span> <span class="token punctuation">}</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> key<span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 创建 K: V</span>
<span class="token keyword">const</span> Direction <span class="token operator">=</span> <span class="token function">strEnum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'North'</span><span class="token punctuation">,</span> <span class="token string">'South'</span><span class="token punctuation">,</span> <span class="token string">'East'</span><span class="token punctuation">,</span> <span class="token string">'West'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建一个类型，这里的 typeof 是得到一个类型</span>
<span class="token keyword">type</span> <span class="token class-name">Direction</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token keyword">typeof</span> Direction<span class="token punctuation">;</span>
<span class="token comment">// 简单的使用</span>
<span class="token keyword">let</span> sample<span class="token operator">:</span> Direction<span class="token punctuation">;</span>
sample <span class="token operator">=</span> Direction<span class="token punctuation">.</span>North<span class="token punctuation">;</span> <span class="token comment">// Okay</span>
sample <span class="token operator">=</span> <span class="token string">'North'</span><span class="token punctuation">;</span> <span class="token comment">// Okay</span>
sample <span class="token operator">=</span> <span class="token string">'AnythingElse'</span><span class="token punctuation">;</span> <span class="token comment">// ERROR!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="readonly-只能保证-我-不能改变属性-其它没有保证的可以改"><a href="#readonly-只能保证-我-不能改变属性-其它没有保证的可以改" class="header-anchor">#</a> readonly 只能保证“我”不能改变属性，其它没有保证的可以改</h2> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">const</span> foo<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> bar<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    bar<span class="token operator">:</span> <span class="token number">123</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 这里改了</span>
  <span class="token keyword">function</span> <span class="token function">iMutateFoo</span><span class="token punctuation">(</span>foo<span class="token operator">:</span> <span class="token punctuation">{</span> bar<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">iMutateFoo</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="ts-类型兼容-重要"><a href="#ts-类型兼容-重要" class="header-anchor">#</a> TS 类型兼容，重要；</h2> <ul><li>B 赋值给 A，如果能完成赋值，则B和A类型兼容</li> <li>TS 总的类型兼容使用的是鸭子辩型法（子结构辩型法）</li> <li>什么是鸭子辩型法？</li> <li>目标类型需要某一些特征，赋值类型只有满足该特征即可</li></ul> <ol><li>基本类型：完全匹配</li> <li>对象类型：鸭子辩型法；因为js经常使用字面量对象，经常把一个对象当成多个类型；</li></ol> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>    <span class="token keyword">interface</span> <span class="token class-name">Duck</span> <span class="token punctuation">{</span>
      sound<span class="token operator">:</span><span class="token string">'gagaga'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span><span class="token string">'haha'</span><span class="token punctuation">,</span>
      sound<span class="token operator">:</span><span class="token string">'gagaga'</span> <span class="token keyword">as</span> <span class="token string">'gagaga'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 如果直接使用字面量对象，会出现更严格的类型检查</span>
    <span class="token comment">// 这样的好处是，防止你直接打错属性名称了；</span>
    <span class="token keyword">let</span> a<span class="token operator">:</span> Duck <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span><span class="token string">'haha'</span><span class="token punctuation">,</span>  <span class="token comment">// 报错，更严格的类型检查</span>
      sound<span class="token operator">:</span><span class="token string">'gagaga'</span><span class="token comment">// 直接字面量不用 as</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 鸭子辩型法，子结构辩型法，变得宽松一点了</span>
    <span class="token keyword">let</span> a<span class="token operator">:</span> Duck <span class="token operator">=</span> b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ol start="3"><li>函数类型：基本和js无缝衔接，很自然；主要是参数 和 返回值</li></ol> <ul><li>参数，js的数组方法都是这样的，如map, forEach；传递给目标的参数可以少，但是不可以多</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>    <span class="token keyword">interface</span> <span class="token class-name">ICallBack</span> <span class="token punctuation">{</span>                  <span class="token comment">//接口约束</span>
         <span class="token punctuation">(</span>n<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> i<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>numbers<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> callBack<span class="token operator">:</span>ICallBack<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> s<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span>
        numbers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">callBack</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              s <span class="token operator">+=</span> d
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> s
    <span class="token punctuation">}</span>
    <span class="token comment">// 如果TS是严格的类型检查，必须要填两个参数；</span>
    <span class="token keyword">let</span> addSum<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>addSum<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>返回值，要求返回，必须返回，类型要匹配；没有要求返回你随意；</li> <li>理解合理性，不要死记硬背；</li></ul> <h2 id="ts-索引签名-加强"><a href="#ts-索引签名-加强" class="header-anchor">#</a> TS 索引签名，加强</h2> <ul><li>js时候<code>对象[值]</code>，其实这个就是索引器，以前也叫成员表达式；TS同样支持</li> <li>在TS中，默认不对成员表达式做严格的类型检测；为什么呢？因为成员表达式的成员是动态的，TS不能够算出来，所有比较放松，不做严格的类型检查；如果要检查，开启 &quot;noImplicitAny&quot;: true, 不仅仅是限制了索引器；这是一个更严格的类型检查；</li> <li>tip：索引器的范围很广，如果是类使用的，是一个通用的选项；</li> <li>如果某个类中使用了两种类型的索引器，两种类型的索引器类型必须匹配</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>p<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">//报错</span>
    <span class="token punctuation">[</span>p<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 正确的使用姿势，两个索引器的使用类型必须匹配</span>
  <span class="token keyword">class</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>p<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> object
    <span class="token punctuation">[</span>p<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">B</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>TypeScript 的索引签名必须是 string 或者 number。</li> <li>symbols 也是有效的，TypeScript 支持它。</li></ul> <h2 id="typeof-ts中-作用于类型的时候-得到的是类型-作用于类的时候-得到的时候构造函数"><a href="#typeof-ts中-作用于类型的时候-得到的是类型-作用于类的时候-得到的时候构造函数" class="header-anchor">#</a> typeof TS中，作用于类型的时候，得到的是类型，作用于类的时候，得到的时候构造函数</h2> <ul><li>const a:any = 'aaa'</li> <li>const b: typeof a = 'aadadsdasdasdasd1'</li></ul> <h2 id="infer"><a href="#infer" class="header-anchor">#</a> infer</h2> <ul><li>待推断类型，这个歌语句的意思是</li> <li>T 限制为函数类型，返回类型如果是P，就返回P，否则返回 any</li> <li>https://jkchao.github.io/typescript-book-chinese/tips/infer.html</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">type</span> <span class="token class-name">ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> infer <span class="token constant">P</span> <span class="token operator">?</span> <span class="token constant">P</span> <span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>现在在有条件类型的 extends 子语句中，允许出现 infer 声明，它会引入一个待推断的类型变量。 这个推断的类型变量可以在有条件类型的 true 分支中被引用。 允许出现多个同类型变量的 infer。</p></blockquote> <p>使用过程中需要注意以下几个关键点：</p> <ul><li>只能出现在有条件类型的 extends 子语句中；</li> <li>出现 infer 声明，会引入一个待推断的类型变量；</li> <li>推断的类型变量可以在有条件类型的 true 分支中被引用；</li> <li>允许出现多个同类型变量的 infer</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>type Parameters<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> infer <span class="token constant">P</span></span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any
  <span class="token operator">?</span> <span class="token constant">P</span>
  <span class="token operator">:</span> never<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>我们仔细研读一下以上源码，发现遵循我们上面所说的 infer 满足的四个特点：</p> <ul><li>只能出现在有条件类型的 extends 子语句中；</li> <li>出现 infer 声明，会引入一个<strong>待推断的类型变量</strong>；</li> <li>推断的类型变量可以在有条件类型的 true 分支中被引用；</li> <li>允许出现多个同类型变量的 infer</li></ul> <p>因为我们要获取函数参数，所以传递的参数必须是个函数，所以有 T extends (...args: any) =&gt; any，由于我们要获取的是函数参数的类型，所以 infer 出现在了函数参数位置。也就是说：</p> <ul><li><code>...args: infer P</code> 参数是一个待推断的类型变量</li> <li><code>any ? P : never</code> 如果返回值是这个待推断的P，也就是说待推断的P是函数的参数，就返回这个参数；</li></ul> <p>同理获取函数返回值的方法就呼之欲出了：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>type ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> infer <span class="token constant">R</span>
  <span class="token operator">?</span> <span class="token constant">R</span>
  <span class="token operator">:</span> any<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>获取构造函数类型 ConstructorParameters：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>type ConstructorParameters<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">new</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any
<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">new</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> infer <span class="token constant">P</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any <span class="token operator">?</span> <span class="token constant">P</span> <span class="token operator">:</span> never<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>一道经典的TS题目：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 假设有一个这样的类型：</span>
<span class="token keyword">interface</span> <span class="token class-name">initInterface</span> <span class="token punctuation">{</span>
  count<span class="token operator">:</span> number<span class="token punctuation">;</span>
  message<span class="token operator">:</span> string<span class="token punctuation">;</span>
  asyncMethod<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>input<span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>Action<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
  syncMethod<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>action<span class="token operator">:</span> Action<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> Action<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 在经过 Connect 函数之后，返回值类型为</span>

type Result <span class="token punctuation">{</span>
  asyncMethod<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>input<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> Action<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  syncMethod<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>action<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> Action<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 其中 Action&lt;T&gt; 的定义为：</span>
<span class="token keyword">interface</span> <span class="token class-name">Action</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  payload<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span>
  type<span class="token operator">:</span> string
<span class="token punctuation">}</span>
<span class="token comment">// 现在要求写出Connect的函数类型定义。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>详解：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>type RemoveNonFunctionProps<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token constant">K</span> <span class="token operator">:</span> never<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">[</span>keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 先移除非函数的属性</span>
type PickFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> RemoveNonFunctionProps<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// 妙用 infer 脱衣服；</span>
type TransformMethod<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>
  <span class="token parameter">input<span class="token operator">:</span> Promise<span class="token operator">&lt;</span>infer <span class="token constant">U</span><span class="token operator">&gt;</span></span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token operator">&lt;</span>Action<span class="token operator">&lt;</span>infer <span class="token constant">S</span><span class="token operator">&gt;&gt;</span>  <span class="token comment">// 限制为一个函数</span>
  <span class="token comment">// 满足 Promise&lt;Action&lt;infer S&gt;&gt; 形式吗？</span>
  <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token parameter">input<span class="token operator">:</span> <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Action<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span>    <span class="token comment">// 满足</span>
  <span class="token comment">// 不满足 Promise&lt;Action&lt;infer S&gt;&gt;，咱接着判断；</span>
  <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter">action<span class="token operator">:</span> Action<span class="token operator">&lt;</span>infer <span class="token constant">U</span><span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Action<span class="token operator">&lt;</span>infer <span class="token constant">S</span><span class="token operator">&gt;</span>
  <span class="token comment">// 满足 Action&lt;infer S&gt; 形式吗？  </span>
  <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token parameter">action<span class="token operator">:</span> <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Action<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span>   <span class="token comment">// 满足</span>
  <span class="token operator">:</span> never<span class="token punctuation">;</span>                     <span class="token comment">// 不满足</span>
type ConnectAll<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> TransformMethod<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

type Connect<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> ConnectAll<span class="token operator">&lt;</span>PickFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">lastUpdate:</span> <span class="time">8/11/2020, 10:55:34 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/my_blog/pages/frontEnd/websocket.html" class="prev">
        什么是 WebSocket？
      </a></span> <span class="next"><a href="/my_blog/pages/frontEnd/webpack.html">
        前端构建之路
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/my_blog/assets/js/app.9ec3da70.js" defer></script><script src="/my_blog/assets/js/2.e3f31b61.js" defer></script><script src="/my_blog/assets/js/31.fe8e5810.js" defer></script>
  </body>
</html>
